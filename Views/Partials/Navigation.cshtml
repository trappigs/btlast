@using Umbraco.Cms.Web.Common.PublishedModels;
@using Umbraco.Extensions
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage

@{
    // Dinamik sıralama kodları kaldırıldı.
}

<link rel="stylesheet" href="/css/navigation.css">

<nav class="modern-nav">
    <div class="nav-container">
        <div class="nav-logo">
            <a href="/" class="logo-link">
                <img src="/media/ihljr0ls/logo-light.svg" alt="Bereketli Topraklar Logo" class="logo-image" width="180" height="45" />
            </a>
        </div>

        <div class="nav-menu">
            @* --- YENİ HARD-CODED SIRALAMA --- *@
            <a href="/" class="nav-item @(Model.Url() == "/" ? "active" : "")">
                Ana sayfa
            </a>
            <a href="/projeler/" class="nav-item @(Model.Url().StartsWith("/projeler") ? "active" : "")">
                Projeler
            </a>
            <a href="/hakkimizda/" class="nav-item @(Model.Url().StartsWith("/hakkimizda") ? "active" : "")">
                Hakkımızda
            </a>
            <a href="/ekibimiz/" class="nav-item @(Model.Url().StartsWith("/ekibimiz") ? "active" : "")">
                Ekibimiz
            </a>
            <a href="/blog/" class="nav-item @(Model.Url().StartsWith("/blog") ? "active" : "")">
                Blog
            </a>
            <a href="/iletisim/" class="nav-item @(Model.Url().StartsWith("/iletisim") ? "active" : "")">
                İletişim
            </a>
            
            @* Mobil menüde görünecek iletişim bilgileri *@
            <div class="mobile-menu-contact-info">
                <ul class="side-panel-icon-list">
                    <li>
                        <a href="mailto:info@bereketlitopraklar.com.tr">
                            <i aria-hidden="true" class="far fa-envelope"></i>
                            <span>info@bereketlitopraklar.com.tr</span>
                        </a>
                    </li>
                    <li>
                        <a href="tel:02244324959">
                            <i aria-hidden="true" class="fas fa-phone-volume"></i>
                            <span>0224 432 49 59</span>
                        </a>
                    </li>
                </ul>
                <div class="side-panel-social-icons">
                    <a href="https://www.facebook.com/bereketliemlak" target="_blank"><i aria-hidden="true" class="fab fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/bereketli_topraklar/" target="_blank"><i aria-hidden="true" class="fab fa-instagram"></i></a>
                    <a href="https://www.linkedin.com/company/bereketlitopraklar/?originalSubdomain=tr" target="_blank"><i aria-hidden="true" class="fab fa-linkedin-in"></i></a>
                    <a href="https://t.me/bereketlitopraklar" target="_blank"><i aria-hidden="true" class="fab fa-telegram"></i></a>
                </div>
            </div>
        </div>
        
        <div class="nav-phone">
            <a href="tel:02244324959" class="phone-link">
                <i class="fas fa-phone-alt"></i>
                <span class="phone-number">0224 432 49 59</span>
            </a>
        </div>
        <button class="side-panel-toggle" aria-label="İletişim panelini aç">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><g id="List"><path d="m21 7h-18c-1.3 0-1.3-2 0-2h18c1.3 0 1.3 2 0 2z"></path><path d="m18 13h-15c-1.3 0-1.3-2 0-2h15c1.3 0 1.3 2 0 2z"></path><path d="m12 19h-9c-1.3 0-1.3-2 0-2h9c1.3 0 1.3 2 0 2z"></path></g></svg>
        </button>

        <button class="mobile-menu-btn" aria-label="Toggle mobile menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</nav>

<div class="mobile-menu-overlay"></div>



<div class="side-panel-overlay"></div>
<div class="side-panel-container">
    <button class="side-panel-close" aria-label="İletişim panelini kapat">×</button>
    <div class="side-panel-content">
        <div class="nav-logo">
            <a href="/">
                <img width="200" src="/media/lq2jzklk/download-1.svg" alt="Logo">
            </a>
        </div>
        
        <h2 class="side-panel-heading">Bademli Ofis</h2>
        <div class="side-panel-address">
            <a href="https://maps.app.goo.gl/wR5jdLPyQWdS1f6j8?g_st=com.google.maps.preview.copy" target="_blank">
                <span>Nilüferköy Mahallesi, Değirmen Sokak, Prime Bademli İş Merkezi, No:12, İç Kapı No:A3<br> Osmangazi/Bursa</span>
            </a>
        </div>


        <div class="side-panel-spacer"></div>
        <ul class="side-panel-icon-list">
            <li>
                <a href="mailto:info@novaarsa.com">
                    <i aria-hidden="true" class="far fa-envelope"></i>
                    <span>info@bereketlitopraklar.com.tr</span>
                </a>
            </li>
            <li>
                <a href="tel:02244324959">
                    <i aria-hidden="true" class="fas fa-phone-volume"></i>
                    <span>0224 432 49 59</span>
                </a>
            </li>
        </ul>

        <div class="side-panel-social-icons">
            <a href="https://www.facebook.com/bereketliemlak" target="_blank"><i aria-hidden="true" class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/bereketli_topraklar/" target="_blank"><i aria-hidden="true" class="fab fa-instagram"></i></a>
            <a href="https://www.linkedin.com/company/bereketlitopraklar/?originalSubdomain=tr" target="_blank"><i aria-hidden="true" class="fab fa-linkedin-in"></i></a>
            <a href="https://wa.me/902244324959" target="_blank"><i aria-hidden="true" class="fab fa-whatsapp"></i></a>
        </div>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- GEREKLİ ELEMENTLER ---
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navMenu = document.querySelector('.nav-menu');
    const mobileOverlay = document.querySelector('.mobile-menu-overlay');
    const body = document.body;
    const navbar = document.querySelector('.modern-nav');

    // --- DİNAMİK MENÜ AÇMA FONKSİYONU ---
    function openMobileMenu() {
        if (!navbar || !navMenu) return;
        const navHeight = navbar.offsetHeight; // Navbar'ın o anki yüksekliğini ölç
        
        // Ölçülen yüksekliğe göre menünün pozisyonunu ve yüksekliğini ayarla
        navMenu.style.top = `${navHeight}px`;
        navMenu.style.height = `calc(100vh - ${navHeight}px)`;

        navMenu.classList.add('active');
        mobileOverlay.classList.add('active');
        body.style.overflow = 'hidden';
        mobileMenuBtn.classList.add('open');
    }

    // --- MENÜ KAPATMA FONKSİYONU ---
    function closeMobileMenu() {
        navMenu.classList.remove('active');
        mobileOverlay.classList.remove('active');
        body.style.overflow = 'auto';
        mobileMenuBtn.classList.remove('open');
    }
    
    // --- Olay dinleyicileri ---
    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', () => {
            if (navMenu.classList.contains('active')) {
                closeMobileMenu();
            } else {
                openMobileMenu();
            }
        });
        mobileOverlay.addEventListener('click', closeMobileMenu);
    }

    // --- Sağ Panel Kodları ---
    const sidePanelToggle = document.querySelector('.side-panel-toggle');
    const sidePanelContainer = document.querySelector('.side-panel-container');
    const sidePanelOverlay = document.querySelector('.side-panel-overlay');
    const sidePanelClose = document.querySelector('.side-panel-close');

    function openSidePanel() {
        sidePanelContainer.classList.add('active');
        sidePanelOverlay.classList.add('active');
        body.style.overflow = 'hidden';
    }

    function closeSidePanel() {
        sidePanelContainer.classList.remove('active');
        sidePanelOverlay.classList.remove('active');
        body.style.overflow = 'auto';
    }

    if (sidePanelToggle) {
        sidePanelToggle.addEventListener('click', openSidePanel);
        sidePanelOverlay.addEventListener('click', closeSidePanel);
        sidePanelClose.addEventListener('click', closeSidePanel);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && sidePanelContainer.classList.contains('active')) {
                closeSidePanel();
            }
        });
    }

    // --- Scroll Davranışı ---
    let lastScrollTop = 0;
    const scrollThreshold = 5;
    window.addEventListener('scroll', function() {
        if (window.innerWidth > 768) {
            const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (currentScrollTop <= 50) {
                navbar.classList.remove('nav-hidden', 'scrolled');
                navbar.classList.add('nav-visible');
                body.classList.remove('scrolled-nav');
            } else if (Math.abs(lastScrollTop - currentScrollTop) > scrollThreshold) {
                if (currentScrollTop > lastScrollTop) {
                    navbar.classList.add('nav-hidden');
                    navbar.classList.remove('nav-visible');
                } else {
                    navbar.classList.remove('nav-hidden');
                    navbar.classList.add('nav-visible', 'scrolled');
                    body.classList.add('scrolled-nav');
                }
            }
            lastScrollTop = currentScrollTop <= 0 ? 0 : currentScrollTop;
        }
    });

    if (window.innerWidth > 768) {
        if (window.pageYOffset > 20) {
            navbar.classList.add('scrolled');
            body.classList.add('scrolled-nav');
        }
        navbar.classList.add('nav-visible');
    }
});
</script>