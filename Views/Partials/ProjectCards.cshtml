@using System.Text
@using System.Globalization
@using System.Text.RegularExpressions
@{
    // --- TÜRKÇE KARAKTER UYUMLU, NİHAİ SLUG FONKSİYONU ---
    Func<string, string> GenerateSlug = (phrase) => 
    {
        if (string.IsNullOrEmpty(phrase)) return "";
        
        string str = phrase.ToLower(new CultureInfo("tr-TR")); // Türkçe'ye uygun küçük harfe çevir
        
        // Türkçe karakterleri değiştir
        str = str.Replace("ı", "i");
        str = str.Replace("ğ", "g");
        str = str.Replace("ü", "u");
        str = str.Replace("ş", "s");
        str = str.Replace("ö", "o");
        str = str.Replace("ç", "c");
        
        // Geçersiz karakterleri tire ile değiştir
        str = Regex.Replace(str, @"[^a-z0-9\s-]", ""); 
        // Boşlukları tek tire ile değiştir
        str = Regex.Replace(str, @"\s+", "-").Trim(); 
        // Birden fazla tireyi tek tireye indirge
        str = Regex.Replace(str, @"-+", "-"); 
        // Başta veya sonda olabilecek tireleri temizle
        str = str.Trim('-'); 
        
        return str;
    };
}

<div class="projects-section" id="projectsSection">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <span class="title-main">BEREKETLİ TOPRAKLAR</span>
                <span class="title-highlight">Projeler</span>
            </h2>
            <p class="section-subtitle">Sizinle birlikte, yatırımınız da kazanmaya devam etsin. #parlayankazanç</p>
        </div>

        <div class="projects-grid">
            @{
                var projects = new[]
                {
                    new { Name = "Çanakkale - Armoni", Image = "/media/udfdcnw5/10.jpg", Description = "Doğa ile uyum içinde, modern yaşamın konforunu sunan villa projesi. Deniz manzaralı parseller ile huzurun adresi." },
                    new { Name = "Ayvalık - Çamoba", Image = "/media/udfdcnw5/10.jpg", Description = "Ege'nin incisi Ayvalık'ta, zeytinlikler arasında konumlanmış özel villa parselleri. Denize sıfır konumu ile ayricalıklı." },
                    new { Name = "İznik", Image = "/media/udfdcnw5/10.jpg", Description = "Tarihi İznik Gölü kıyısında, doğa ile iç içe yaşam alanları. Sakin ve huzurlu bir yaşam için ideal lokasyon." },
                    new { Name = "Kocaeli", Image = "/media/udfdcnw5/10.jpg", Description = "İstanbul'a yakın konumu ile pratik ulaşım imkanı. Modern mimarisi ve geniş yaşam alanları ile öne çıkan proje." },
                    new { Name = "Çanakkale", Image = "/media/udfdcnw5/10.jpg", Description = "Çanakkale'nin en prestijli bölgesinde, deniz ve doğa manzaralı lüks villa projeleri. Yatırım değeri yüksek parseller." },
                    new { Name = "Düzce - Gümüşova", Image = "/media/udfdcnw5/10.jpg", Description = "Karadeniz'in yeşili ile buluşan villa parselleri. Doğal yaşamın tadını çıkarabileceğiniz huzurlu bir ortam." }
                };

                foreach (var project in projects)
                {
                    var projectSlug = GenerateSlug(project.Name);
                    <div class="project-card" data-location="@project.Name">
                        <div class="card-image">
                            <img src="@project.Image" alt="@project.Name">
                            <div class="card-overlay">
                                <div class="card-content">
                                    <h3 class="card-title">@project.Name</h3>
                                    <p class="card-description">@project.Description</p>
                                    <div class="card-actions">
                                        <a href="/projeler/@projectSlug/" class="btn btn-primary btn-sm">Projeyi İncele</a>
                                        <a href="#" class="btn btn-secondary btn-sm">Form Doldur</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <h4 class="card-location">@project.Name</h4>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>

<link rel="stylesheet" href="/css/project-cards.css">
<script src="/Scripts/project-cards.js"></script>